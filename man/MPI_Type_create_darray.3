.\" Man page generated from reStructuredText.
.
.TH "MPI_TYPE_CREATE_DARRAY" "3" "Jan 05, 2022" "" "Open MPI"
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.sp
\fI\%MPI_Type_create_darray\fP \- Creates a distributed array datatype;
.SH SYNTAX
.SS C Syntax
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
#include <mpi.h>
int MPI_Type_create_darray(int size, int rank, int ndims,
     const int array_of_gsizes[], const int array_of_distribs[],
     const int array_of_dargs[], const int array_of_psizes[],
     int order, MPI_Datatype oldtype, MPI_Datatype *newtype)
.ft P
.fi
.UNINDENT
.UNINDENT
.SS Fortran Syntax
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
USE MPI
! or the older form: INCLUDE \(aqmpif.h\(aq
MPI_TYPE_CREATE_DARRAY(SIZE, RANK, NDIMS, ARRAY_OF_GSIZES,
     ARRAY_OF_DISTRIBS, ARRAY_OF_DARGS, ARRAY_OF_PSIZES, ORDER,
     OLDTYPE, NEWTYPE, IERROR)

     INTEGER SIZE, RANK, NDIMS, ARRAY_OF_GSIZES(*), ARRAY_OF_DISTRIBS(*),
             ARRAY_OF_DARGS(*), ARRAY_OF_PSIZES(*), ORDER, OLDTYPE,
             NEWTYPE, IERROR
.ft P
.fi
.UNINDENT
.UNINDENT
.SS Fortran 2008 Syntax
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
USE mpi_f08
MPI_Type_create_darray(size, rank, ndims, array_of_gsizes,
     array_of_distribs, array_of_dargs, array_of_psizes, order,
             oldtype, newtype, ierror)
     INTEGER, INTENT(IN) :: size, rank, ndims, array_of_gsizes(ndims),
     array_of_distribs(ndims), array_of_dargs(ndims),
     array_of_psizes(ndims), order
     TYPE(MPI_Datatype), INTENT(IN) :: oldtype
     TYPE(MPI_Datatype), INTENT(OUT) :: newtype
     INTEGER, OPTIONAL, INTENT(OUT) :: ierror
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
INPUT PARAMETERS
\-\-\-\-\- \-\-\-\-\-\-\-\-\-\-
.INDENT 0.0
.IP \(bu 2
\fBsize\fP: Size of process group (positive integer).
.IP \(bu 2
\fBrank\fP: Rank in process group (nonnegative integer).
.IP \(bu 2
\fBndims\fP: Number of array dimensions as well as process grid dimensions (positive integer).
.IP \(bu 2
\fBarray_of_gsizes\fP: Number of elements of type \fIoldtype\fP in each dimension of global array (array of positive integers).
.IP \(bu 2
\fBarray_of_distribs\fP: Distribution of array in each dimension (array of state).
.IP \(bu 2
\fBarray_of_dargs\fP: Distribution argument in each dimension (array of positive integers).
.IP \(bu 2
\fBarray_of_psizes\fP: Size of process grid in each dimension (array of positive integers).
.IP \(bu 2
\fBorder\fP: Array storage order flag (state).
.IP \(bu 2
\fBoldtype\fP: Old data type (handle).
.UNINDENT
.sp
OUTPUT PARAMETERS
\-\-\-\-\-\- \-\-\-\-\-\-\-\-\-\-
.INDENT 0.0
.IP \(bu 2
\fBnewtype\fP: New data type (handle).
.IP \(bu 2
\fBIERROR\fP: Fortran only: Error status (integer).
.UNINDENT
.SH DESCRIPTION
.sp
\fI\%MPI_Type_create_darray\fP can be used to generate the data types
corresponding to the distribution of an ndims\-dimensional array of
\fIoldtype\fP elements onto an \fIndims\fP\-dimensional grid of logical
processes. Unused dimensions of \fIarray_of_psizes\fP should be set to 1.
For a call to \fI\%MPI_Type_create_darray\fP to be correct, the equation
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
  ndims\-1
pi              array_of_psizes[i] = size
  i=0
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
must be satisfied. The ordering of processes in the process grid is
assumed to be row\-major, as in the case of virtual Cartesian process
topologies in MPI\-1.
.sp
Each dimension of the array can be distributed in one of three ways:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
\- MPI_DISTRIBUTE_BLOCK \- Block distribution
\- MPI_DISTRIBUTE_CYCLIC \- Cyclic distribution
\- MPI_DISTRIBUTE_NONE \- Dimension not distributed.
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The constant MPI_DISTRIBUTE_DFLT_DARG specifies a default distribution
argument. The distribution argument for a dimension that is not
distributed is ignored. For any dimension \fIi\fP in which the distribution
is MPI_DISTRIBUTE_BLOCK, it erroneous to specify \fIarray_of_dargs[i]\fP
\fI*\fP \fIarray_of_psizes[i]\fP < \fIarray_of_gsizes[i]\fP\&.
.sp
For example, the HPF layout ARRAY(CYCLIC(15)) corresponds to
MPI_DISTRIBUTE_CYCLIC with a distribution argument of 15, and the HPF
layout ARRAY(BLOCK) corresponds to MPI_DISTRIBUTE_BLOCK with a
distribution argument of MPI_DISTRIBUTE_DFLT_DARG.
.sp
The \fIorder\fP argument is used as in MPI_TYPE_CREATE_SUBARRAY to specify
the storage order. Therefore, arrays described by this type constructor
may be stored in Fortran (column\-major) or C (row\-major) order. Valid
values for order are MPI_ORDER_FORTRAN and MPI_ORDER_C.
.sp
This routine creates a new MPI data type with a typemap defined in terms
of a function called "cyclic()" (see below).
.sp
Without loss of generality, it suffices to define the typemap for the
MPI_DISTRIBUTE_CYCLIC case where MPI_DISTRIBUTE_DFLT_DARG is not used.
.sp
MPI_DISTRIBUTE_BLOCK and MPI_DISTRIBUTE_NONE can be reduced to the
MPI_DISTRIBUTE_CYCLIC case for dimension \fIi\fP as follows.
.sp
MPI_DISTRIBUTE_BLOCK with \fIarray_of_dargs[i]\fP equal to
MPI_DISTRIBUTE_DFLT_DARG is equivalent to MPI_DISTRIBUTE_CYCLIC with
\fIarray_of_dargs[i]\fP set to
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
(array_of_gsizes[i] + array_of_psizes[i] \- 1)/array_of_psizes[i]
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
If \fIarray_of_dargs[i]\fP is not MPI_DISTRIBUTE_DFLT_DARG, then
MPI_DISTRIBUTE_BLOCK and DISTRIBUTE_CYCLIC are equivalent.
.sp
MPI_DISTRIBUTE_NONE is equivalent to MPI_DISTRIBUTE_CYCLIC with
\fIarray_of_dargs[i]\fP set to \fIarray_of_gsizes[i]\fP\&.
.sp
Finally, MPI_DISTRIBUTE_CYCLIC with \fIarray_of_dargs[i]\fP equal to
MPI_DISTRIBUTE_DFLT_DARG is equivalent to MPI_DISTRIBUTE_CYCLIC with
\fIarray_of_dargs[i]\fP set to 1.
.SH NOTES
.sp
For both Fortran and C arrays, the ordering of processes in the process
grid is assumed to be row\-major. This is consistent with the ordering
used in virtual Cartesian process topologies in MPI\-1. To create such
virtual process topologies, or to find the coordinates of a process in
the process grid, etc., users may use the corresponding functions
provided in MPI\-1.
.SH ERRORS
.sp
Almost all MPI routines return an error value; C routines as the value
of the function and Fortran routines in the last argument.
.sp
Before the error value is returned, the current MPI error handler is
called. By default, this error handler aborts the MPI job, except for
I/O function errors. The error handler may be changed with
MPI_Comm_set_errhandler; the predefined error handler MPI_ERRORS_RETURN
may be used to cause error values to be returned. Note that MPI does not
guarantee that an MPI program can continue past an error.
.SH COPYRIGHT
2020, The Open MPI Community
.\" Generated by docutils manpage writer.
.
